# 贴脸酱 - 部署说明

## 📦 文件说明

项目包含以下文件：
- `index.html` - 主程序文件（包含所有代码）
- `models/` - AI模型文件夹（已下载，约45KB）
  - `ssd_mobilenetv1_model-*` - 人脸检测模型
  - `face_expression_model-*` - 表情识别模型

## 🚀 部署方式

### 方案1：CloudFlare Pages（推荐）

1. 登录 [CloudFlare Dashboard](https://dash.cloudflare.com/)
2. 进入 Pages -> 创建项目
3. 上传整个文件夹（index.html + models/）
4. 部署完成后，CloudFlare 会自动提供全球 CDN 加速

**优点：**
- ✅ 全球 CDN 加速
- ✅ 免费且快速
- ✅ 支持自定义域名
- ✅ 自动 HTTPS

### 方案2：七牛云对象存储 + CDN

1. 登录七牛云控制台
2. 创建对象存储空间（选择公开读取）
3. 上传所有文件
4. 绑定 CDN 加速域名
5. 配置 CORS（允许跨域访问）

**优点：**
- ✅ 国内访问速度快
- ✅ 价格便宜
- ✅ 稳定可靠

### 方案3：本地使用

1. 直接打开 `index.html` 文件
2. 或使用 Python 启动本地服务器：
   ```bash
   python3 -m http.server 8000
   ```
3. 访问 `http://localhost:8000`

## ⚙️ 配置 CDN 地址

如果你部署到 CloudFlare 或七牛云，可以修改 `index.html` 中的 CDN 配置：

找到这一行（约第 565 行）：
```javascript
const MODEL_URL_CDN = 'YOUR_CDN_URL/models';
```

将 `YOUR_CDN_URL` 替换成你的 CDN 地址，例如：
```javascript
const MODEL_URL_CDN = 'https://your-domain.pages.dev/models';
```

然后修改这一行（约第 569 行）：
```javascript
let MODEL_URL = MODEL_URL_LOCAL;
```

改为：
```javascript
let MODEL_URL = MODEL_URL_CDN; // 使用 CDN
```

## 🔄 加载策略

当前代码支持**自动降级**：
1. 优先尝试本地模型 (`./models/`)
2. 如果失败，自动切换到 GitHub CDN
3. 保证在任何情况下都能正常使用

## 📝 注意事项

1. **CORS问题**：如果部署到云端，确保启用 CORS，允许跨域访问
2. **HTTPS**：建议使用 HTTPS，某些浏览器限制 HTTP 访问摄像头
3. **缓存**：模型文件建议设置长期缓存（1年），减少加载时间

## 🌐 推荐的CDN配置

### CloudFlare Pages
```
缓存规则：
- *.bin -> 缓存1年
- *.json -> 缓存1年
- index.html -> 不缓存或缓存1小时
```

### 七牛云
```
访问控制：公开
防盗链：根据需要配置
缓存时间：
- 模型文件：31536000秒（1年）
- HTML文件：3600秒（1小时）
```

## 📊 文件大小

- `index.html`: ~50KB
- `models/`: ~45KB
- **总计**: ~95KB

非常轻量，加载速度快！

## 🎉 完成

部署完成后，所有用户都能享受更快的加载速度！

---

**有问题？** 随时联系！

